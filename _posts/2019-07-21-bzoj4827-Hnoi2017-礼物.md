---
layout: post
date: 2019-07-21
title: bzoj4827 Hnoi2017 礼物
tags: 题解
---

[题目链接](https://www.lydsy.com/JudgeOnline/problem.php?id=4827)

# solution

将式子展开

$$\sum\limits_{i=1}^n(x_i - y_i + c)^2 $$
$$=\sum\limits_{i=1}^nx_i^2+y_i^2-2x_iy_i+2c(x_i-y_i)+c^2$$
$$=\sum\limits_{i=1}^nx_i^2+\sum\limits_{i=1}^ny_i^2-2\sum\limits_{i=1}^nx_iy_i+2c(\sum\limits_{i=1}^nx_i-\sum\limits_{i=1}^ny_i)+nc^2$$

前面$\sum\limits_{i=1}^nx_i^2+\sum\limits_{i=1}^ny_i^2$是定值。
后面$2c(\sum\limits_{i=1}^nx_i-\sum\limits_{i=1}^ny_i)+nc^2$是个二次函数。最值很好求。
所以问题就是要最大化$\sum\limits_{i=1}^nx_iy_i$,

我们设将$y$这个手环左移了$k$下。那么答案就变为$\sum\limits_{i=1}^nx_iy_{i+k}$。

将x序列倒过来就变成了卷积的形式$\sum\limits_{i=1}^nx_{n-i}y_{i+k}$。

# code


